<<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <title>Checkout</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="user_assets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link rel="stylesheet" href="user_assets/css/main.css?v=3.4">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
        }

        .checkout-form {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .order-summary,
        .billing-address,
        .shipping-address,
        .payment-method {
            width: 48%;
            background-color: #ffffff;
            padding: 20px;
            margin-bottom: 20px;
        }

        .order-summary h3,
        .billing-address h3,
        .shipping-address h3,
        .payment-method h3 {
            font-size: 16px;
            margin-bottom: 10px;
        }

        .order-item {
            display: flex;
            margin-bottom: 10px;
        }

        .order-item img {
            width: 60px;
            height: auto;
            margin-right: 10px;
        }

        .order-item .product-details {
            flex: 1;
        }

        .order-item .product-details p {
            margin: 0;
            font-size: 14px;
        }

        .payment-method select {
            width: 100%;
            margin-bottom: 10px;
        }

        .place-order-btn {
            font-size: 14px;
            padding: 8px 16px;
            background-color: #ff0000;
            color: #ffffff;
            border: none;
            cursor: pointer;
        }

        .address-selection {
            margin-bottom: 20px;
        }

        .address-selection select {
            width: 100%;
            margin-bottom: 10px;
        }

        .edit-address-btn {
            font-size: 12px;
            padding: 4px 8px;
            background-color: #007bff;
            color: #ffffff;
            border: none;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .checkout-form {
                flex-direction: column;
            }

            .order-summary,
            .billing-address,
            .shipping-address,
            .payment-method {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/" rel="nofollow">Home</a>
                    <span></span> Shop
                    <span></span> Checkout
                </div>
            </div>
        </div>
        <section class="mt-50 mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 mb-sm-15">
                        <div class="panel-body">
                            <form action="/place-order" method="POST" class="checkout-form">
                                <div class="order-summary">
                                    <h3>Order Summary</h3>
                                    <ul>
                                        <% if (cart && cart.products.length > 0) { %>
                                            <% cart.products.forEach(item => { %>
                                                <li class="order-item">
                                                    <img src="/user_assets/imgs/shop/<%= item.productId.images[0] %>" alt="<%= item.productId.name %>" />
                                                    <div class="product-details">
                                                        <p><%= item.productId.name %></p>
                                                        <p>Quantity: <%= item.quantity %></p>
                                                        <p>Price: <%= item.productId.price %> each</p>
                                                        <p>Subtotal: <%= item.quantity * item.productId.price %></p>
                                                    </div>
                                                </li>
                                            <% }); %>
                                        <% } else { %>
                                            <li>Your cart is empty</li>
                                        <% } %>
                                    </ul>
                                    <p>Total Amount: <%= cart ? cart.totalPrice : 0 %></p>
                                </div>
                                <div class="billing-address">
                                    <h3>Billing Address</h3>
                                    <div class="address-selection">
                                        <% if (user && user.addresses && user.addresses.length > 0) { %>
                                            <select name="billingAddressId" required>
                                                <% user.addresses.forEach(address => { %>
                                                    <option value="<%= address._id %>">
                                                        <%= address.firstName %> <%= address.lastName %> - <%= address.address1 %>, <%= address.city %>, <%= address.state %> <%= address.zip %>
                                                    </option>
                                                <% }); %>
                                            </select>
                                            <button type="button" class="edit-address-btn" onclick="location.href='/profile#addresses'">Edit Address</button>
                                        <% } else { %>
                                            <p>No saved addresses found. Please add an address in your profile.</p>
                                        <% } %>
                                    </div>
                                </div>
                                <div class="shipping-address">
                                    <h3>Shipping Address</h3>
                                    <div class="address-selection">
                                        <% if (user && user.addresses && user.addresses.length > 0) { %>
                                            <select name="shippingAddressId" required>
                                                <% user.addresses.forEach(address => { %>
                                                    <option value="<%= address._id %>">
                                                        <%= address.firstName %> <%= address.lastName %> - <%= address.address1 %>, <%= address.city %>, <%= address.state %> <%= address.zip %>
                                                    </option>
                                                <% }); %>
                                            </select>
                                            <button type="button" class="edit-address-btn" onclick="location.href='/profile#addresses'">Edit Address</button>
                                        <% } else { %>
                                            <p>No saved addresses found. Please add an address in your profile.</p>
                                        <% } %>
                                    </div>
                                </div>
                                <div class="payment-method">
                                    <h3>Payment Method</h3>
                                    <select name="paymentMethod" class="form-control" required>
                                        <option value="Cash On Delivery">Cash On Delivery</option>
                                        <!-- Add more payment options here as needed -->
                                    </select>
                                    <button type="submit" class="btn btn-primary place-order-btn">Place Order</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <!-- Vendor JS-->
    <script src="user_assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="user_assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="user_assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="user_assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="user_assets/js/plugins/slick.js"></script>
    <script src="user_assets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="user_assets/js/plugins/wow.js"></script>
    <script src="user_assets/js/plugins/jquery-ui.js"></script>
    <script src="user_assets/js/plugins/perfect-scrollbar.js"></script>
    <script src="user_assets/js/plugins/magnific-popup.js"></script>
    <script src="user_assets/js/plugins/select2.min.js"></script>
    <script src="user_assets/js/plugins/waypoints.js"></script>
    <script src="user_assets/js/plugins/counterup.js"></script>
    <script src="user_assets/js/plugins/jquery.countdown.min.js"></script>
    <script src="user_assets/js/plugins/images-loaded.js"></script>
    <script src="user_assets/js/plugins/isotope.js"></script>
    <script src="user_assets/js/plugins/scrollup.js"></script>
    <script src="user_assets/js/plugins/jquery.vticker-min.js"></script>
    <script src="user_assets/js/plugins/jquery.theia.sticky.js"></script>
    <script src="user_assets/js/plugins/jquery.elevatezoom.js"></script>
    <!-- Template JS -->
    <script src="user_assets/js/main.js?v=3.4"></script>
</body>
</html>

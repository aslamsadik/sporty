<%- include("../layouts/header.ejs") %>

<main class="main">
  <section class="mt-50 mb-50">
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <div class="table-responsive">
                      <% if (wishlist && wishlist.products.length > 0) { %>
                          <table class="table shopping-summery text-center">
                              <thead>
                                  <tr class="main-heading">
                                      <th scope="col" colspan="2">Product</th>
                                      <th scope="col">Price</th>
                                      <th scope="col">Stock Status</th>
                                      <th scope="col">Action</th>
                                      <th scope="col">Remove</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  <% wishlist.products.forEach(product => { %>
                                      <tr>
                                          <td class="image product-thumbnail">
                                              <img src="<%= product.images.length > 0 ? `/user_assets/imgs/shop/${product.images[0]}` : '/user_assets/imgs/shop/default-image.jpg' %>" alt="#">
                                          </td>
                                          <td class="product-des product-name">
                                              <h5 class="product-name"><a href="/product/<%= product._id %>"><%= product.name %></a></h5>
                                              <p class="font-xs"><%= product.description %></p>
                                          </td>
                                          <td class="price" data-title="Price"><span>â‚¹<%= product.price %></span></td>
                                          <td class="text-center" data-title="Stock">
                                              <% if (product.stock > 0) { %>
                                                  <span class="color3 font-weight-bold">In Stock</span>
                                              <% } else { %>
                                                  <span class="text-danger font-weight-bold">Out of stock</span>
                                              <% } %>
                                          </td>
                                          <td class="text-right" data-title="Cart">
                                              <% if (product.stock > 0) { %>
                                                  <form action="/cart/add" method="POST">
                                                      <input type="hidden" name="productId" value="<%= product._id %>">
                                                      <button type="submit" class="btn btn-sm"><i class="fi-rs-shopping-bag mr-5"></i>Add to cart</button>
                                                  </form>
                                              <% } else { %>
                                                  <button class="btn btn-sm btn-secondary" disabled><i class="fi-rs-headset mr-5"></i>Out of Stock</button>
                                              <% } %>
                                          </td>
                                          <td class="action" data-title="Remove">
                                              <form action="/wishlist/remove" method="POST">
                                                  <input type="hidden" name="productId" value="<%= product._id %>">
                                                  <button type="submit" class="btn btn-sm btn-danger"><i class="fi-rs-trash"></i></button>
                                              </form>
                                          </td>
                                      </tr>
                                  <% }); %>
                              </tbody>
                          </table>
                      <% } else { %>
                          <p>Your wishlist is empty.</p>
                      <% } %>
                  </div>
              </div>
          </div>
      </div>
  </section>
</main>



